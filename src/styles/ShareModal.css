/* ShareCard Modal Styles */
.share-card-modal {
	display: flex;
	gap: 1.25rem;
	max-height: 100%;
	min-height: 480px;
	box-sizing: border-box;
	width: 100%;
	overflow: hidden;
}

/* 给外层 Obsidian modal container 增加可选加宽类 */
/* 容器加宽：同时兼容 modal-container 与 modal 本身加类的情况 */
.modal-container.share-card-wide,
.modal.share-card-wide {
	width: 96vw !important;
	max-width: 96vw !important;
	height: 88vh !important;
	max-height: 88vh !important;
	display: flex;
	flex-direction: column;
	position: fixed;
	left: 50%;
	top: 50%;
	transform: translate(-50%, -50%);
	margin: 0 !important;
}

.modal-container.share-card-wide .modal,
.modal.share-card-wide {
	width: 100% !important;
	max-width: 100% !important;
	height: 100% !important;
	max-height: 100% !important;
	display: flex;
	flex-direction: column;
}

/* 让 content 区域填满以摆放左右布局 */
.modal-container.share-card-wide .modal-content,
.modal.share-card-wide .modal-content {
	flex: 1 1 auto;
	display: flex;
	flex-direction: column;
	overflow: hidden;
}

/* 让我们内部根布局自适应剩余空间 */
.modal-container.share-card-wide .share-card-modal,
.modal.share-card-wide .share-card-modal {
	height: 100%;
}

/* Soft rounded card + subtle shadow for a polished look */
.modal-container.share-card-wide .share-card-modal,
.modal.share-card-wide .share-card-modal {
	border-radius: 12px;
	box-shadow:
		0 10px 30px rgba(0, 0, 0, 0.12),
		0 4px 8px rgba(0, 0, 0, 0.06);
	overflow: hidden; /* ensure rounded corners clip children */
	transition:
		transform 160ms ease,
		box-shadow 200ms ease,
		opacity 120ms ease;
}

.share-card-left {
	flex: 0 0 300px;
	display: flex;
	flex-direction: column;
	gap: 0.75rem;
	font-size: 13px;
	overflow-y: auto;
	padding-right: 4px;
	/* 防止潜在父级 transform 影响子像素文本渲染 */
	transform: translateZ(0); /* 独立图层，有时可改善/有时会加重；若仍模糊可改成 none */
	backface-visibility: hidden;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	/* 提供稳定背景，避免透明叠加导致 ClearType 失效 */
	background: var(--background-primary);
	/* 微调让滚动文本更锐利 */
	text-rendering: optimizeLegibility;
}
.share-card-left label {
	font-weight: 600;
	margin-top: 4px;
}
.share-card-left input,
.share-card-left select,
.share-card-left button {
	font-size: 13px;
}
.share-card-actions {
	display: flex;
	gap: 0.5rem;
	flex-wrap: wrap;
}
.share-card-actions button {
	flex: 1 1 auto;
}

.share-card-right {
	flex: 1 1 auto;
	position: relative;
	display: flex;
	flex-direction: column;
}
.share-card-preview {
	position: relative;
	flex: 1 1 auto;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-secondary);
	overflow: hidden; /* hide panned content */
	cursor: grab;
	user-select: none;
}
.share-card-preview.panning {
	cursor: grabbing;
}

.share-card-pan-wrapper {
	position: absolute;
	top: 0;
	left: 0;
	transform-origin: top left;
}
.share-card-root {
	box-sizing: border-box;
	padding: 12px;
	background: var(--background-primary);
	/* Ensure inner root respects the outer radius and does not overflow */
	border-radius: 12px;
	overflow: hidden;
	/* little elevation on the inner card to visually separate controls */
	box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.02);
}

/* Playground 内容容器（与作者信息分离） */
.share-card-content {
	position: relative;
}

/* Author block styles (preview & export friendly defaults) */
.share-card-author-container {
	box-sizing: border-box;
	width: 100%;
	display: flex;
	align-items: center;
	gap: 8px;
	margin-top: 8px;
}
.share-card-author-container:first-child { /* 顶部模式时去掉上 margin */
	margin-top: 0;
	margin-bottom: 8px;
}
.share-card-author-avatar {
	flex: 0 0 auto;
	box-shadow: 0 0 0 1px rgba(255,255,255,0.08), 0 2px 4px rgba(0,0,0,0.25);
}
.share-card-author-name {
	font-weight: 600;
}
.share-card-author-remark {
	opacity: 0.85;
}

/* Remove the dashed/document-style border from tabflow content inside the share modal.
   Keep this override scoped to the modal so other views are unaffected. */
.modal-container.share-card-wide .share-card-modal .tabflow-doc-main-content,
.modal.share-card-wide .share-card-modal .tabflow-doc-main-content {
	border: none !important;
	background: transparent !important; /* let .share-card-root provide the background */
	padding: 0 !important; /* avoid double padding inside the card root */
	border-radius: 0 !important;
}

.share-card-hint {
	margin-top: 6px;
	font-size: 11px;
	opacity: 0.7;
}

/* Prevent accidental text selection while panning */
.share-card-preview * {
	-webkit-user-drag: none;
}

/* 兜底隐藏光标/播放相关高亮（双保险：即使未成功传 player:'disable' 也不显示） */
.share-card-root .at-cursor-bar,
.share-card-root .at-cursor-beat,
.share-card-root .at-selection,
.share-card-root .alphatex-controls,
.share-card-root .nav-buttons-container {
	display: none !important;
}
