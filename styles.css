/* This file is auto generated, to edit this please refer to ./src/styles/*.css  */ 
/* --- ShareModal.css --- */
/* ShareCard Modal Styles */
.share-card-modal {
	display: flex;
	gap: 1.25rem;
	max-height: 100%;
	min-height: 480px;
	box-sizing: border-box;
	width: 100%;
	overflow: hidden;
}

/* 给外层 Obsidian modal container 增加可选加宽类 */
/* 容器加宽：同时兼容 modal-container 与 modal 本身加类的情况 */
/* Center the modal using a full-bleed flex container to avoid transform-based
   centering (which can promote compositing and disable ClearType on Windows). */
.modal-container.share-card-wide {
	position: fixed;
	inset: 0; /* top:0; right:0; bottom:0; left:0; */
	display: flex;
	align-items: center;
	justify-content: center;
	margin: 0 !important;
}

/* Ensure modal itself retains the intended size when the class is applied to
   the modal element instead of the container. */
.modal.share-card-wide {
	width: 96vw !important;
	max-width: 96vw !important;
	height: 88vh !important;
	max-height: 88vh !important;
	display: flex;
	flex-direction: column;
	margin: 0 !important;
}

.modal-container.share-card-wide .modal,
.modal.share-card-wide {
	/* When the container has the sizing class, target the inner .modal to
	   adopt the intended modal dimensions; when the class is on the modal
	   itself, the rule above already applies. */
	width: 96vw !important;
	max-width: 96vw !important;
	height: 88vh !important;
	max-height: 88vh !important;
	display: flex;
	flex-direction: column;
}

/* 让 content 区域填满以摆放左右布局 */
.modal-container.share-card-wide .modal-content,
.modal.share-card-wide .modal-content {
	flex: 1 1 auto;
	display: flex;
	flex-direction: column;
	overflow: hidden;
}

/* 让我们内部根布局自适应剩余空间 */
.modal-container.share-card-wide .share-card-modal,
.modal.share-card-wide .share-card-modal {
	height: 100%;
}

/* Soft rounded card + subtle shadow for a polished look */
.modal-container.share-card-wide .share-card-modal,
.modal.share-card-wide .share-card-modal {
	border-radius: 12px;
	box-shadow:
		0 10px 30px rgba(0, 0, 0, 0.12),
		0 4px 8px rgba(0, 0, 0, 0.06);
	overflow: hidden; /* ensure rounded corners clip children */
	transition:
		transform 160ms ease,
		box-shadow 200ms ease,
		opacity 120ms ease;
}

.share-card-left {
	flex: 0 0 300px;
	display: flex;
	flex-direction: column;
	gap: 0.75rem;
	font-size: 13px;
	overflow-y: auto;
	scrollbar-width: none; /* 隐藏滚动条（Firefox） */
	padding-right: 4px;
	/* 防止潜在父级 transform 影响子像素文本渲染 */
	/*transform: translateZ(0);*/ /* 独立图层，有时可改善/有时会加重；若仍模糊可改成 none */
	backface-visibility: hidden;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	/* 提供稳定背景，避免透明叠加导致 ClearType 失效 */
	background: var(--background-primary);
	/* 微调让滚动文本更锐利 */
	text-rendering: optimizeLegibility;
}
.share-card-left label {
	font-weight: 600;
	margin-top: 4px;
}
.share-card-left input,
.share-card-left select,
.share-card-left button {
	font-size: 13px;
}
.share-card-actions {
	display: flex;
	gap: 0.5rem;
	flex-wrap: wrap;
}
.share-card-actions button {
	flex: 1 1 auto;
}

.share-card-right {
	flex: 1 1 auto;
	position: relative;
	display: flex;
	flex-direction: column;
}
.share-card-preview {
	position: relative;
	flex: 1 1 auto;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-secondary);
	overflow: hidden; /* hide panned content */
	cursor: grab;
	user-select: none;
}
.share-card-preview.panning {
	cursor: grabbing;
}

.share-card-pan-wrapper {
	position: absolute;
	top: 0;
	left: 0;
	transform-origin: top left;
}
.share-card-root {
	box-sizing: border-box;
	padding: 12px;
	background: var(--background-primary);
	/* Ensure inner root respects the outer radius and does not overflow */
	border-radius: 12px;
	overflow: hidden;
	/* little elevation on the inner card to visually separate controls */
	box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.02);
}

/* Playground 内容容器（与作者信息分离） */
.share-card-content {
	position: relative;
}

/* Author block styles (preview & export friendly defaults) */
.share-card-author-container {
	box-sizing: border-box;
	width: 100%;
	display: flex;
	align-items: center;
	gap: 8px;
	margin-top: 8px;
}
.share-card-author-container:first-child {
	/* 顶部模式时去掉上 margin */
	margin-top: 0;
	margin-bottom: 8px;
}
.share-card-author-avatar {
	flex: 0 0 auto;
	box-shadow:
		0 0 0 1px rgba(255, 255, 255, 0.08),
		0 2px 4px rgba(0, 0, 0, 0.25);
}
.share-card-author-name {
	font-weight: 600;
}
.share-card-author-remark {
	opacity: 0.85;
}

/* Two-column compact form grid for author settings */
.share-card-form-grid {
	display: grid;
	grid-template-columns: 110px 1fr;
	align-items: center;
	row-gap: 6px;
	column-gap: 8px;
	margin-top: 12px;
	padding: 10px 10px 12px;
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
}

/* 基础配置卡片，与作者设置视觉一致，字段更少但复用 grid 模式 */
.share-card-basic-grid {
	display: grid;
	grid-template-columns: 110px 1fr;
	align-items: center;
	row-gap: 6px;
	column-gap: 8px;
	margin-top: 4px;
	padding: 10px 10px 12px;
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
}
.share-card-basic-grid .sc-label {
	font-weight: 600;
	font-size: 12px;
	opacity: 0.9;
	line-height: 1.2;
}
.share-card-basic-grid input[type='text'],
.share-card-basic-grid input[type='number'],
.share-card-basic-grid input[type='file'],
.share-card-basic-grid input[type='color'],
.share-card-basic-grid select {
	width: 100%;
	box-sizing: border-box;
}
.share-card-basic-grid input[type='checkbox'] {
	justify-self: start;
}
.share-card-form-grid .sc-label {
	font-weight: 600;
	font-size: 12px;
	opacity: 0.9;
	line-height: 1.2;
}
.share-card-form-grid input[type='text'],
.share-card-form-grid input[type='number'],
.share-card-form-grid input[type='file'],
.share-card-form-grid input[type='color'],
.share-card-form-grid select {
	width: 100%;
	box-sizing: border-box;
}
.share-card-form-grid input[type='checkbox'] {
	justify-self: start; /* keep checkbox near left edge of its cell */
}

/* tighter buttons inside grid if any future ones appear */
.share-card-form-grid button {
	font-size: 12px;
	padding: 4px 8px;
}

/* Remove the dashed/document-style border from tabflow content inside the share modal.
   Keep this override scoped to the modal so other views are unaffected. */
.modal-container.share-card-wide .share-card-modal .tabflow-doc-main-content,
.modal.share-card-wide .share-card-modal .tabflow-doc-main-content {
	border: none !important;
	background: transparent !important; /* let .share-card-root provide the background */
	padding: 0 !important; /* avoid double padding inside the card root */
	border-radius: 0 !important;
}

.share-card-hint {
	margin-top: 6px;
	font-size: 11px;
	opacity: 0.7;
}

/* Prevent accidental text selection while panning */
.share-card-preview * {
	-webkit-user-drag: none;
}

/* 兜底隐藏光标/播放相关高亮（双保险：即使未成功传 player:'disable' 也不显示） */
.share-card-root .at-cursor-bar,
.share-card-root .at-cursor-beat,
.share-card-root .at-selection,
.share-card-root .alphatex-controls,
.share-card-root .nav-buttons-container {
	display: none !important;
}

/* 在文件末尾添加（隐藏滚动条，Chrome/Safari/Edge） */
.share-card-left::-webkit-scrollbar {
	display: none;
}

/* --- TrackModal.css --- */
.tracks-modal .setting-item {
	display: flex;
	flex-direction: column;
	gap: 0.5em;
	margin-bottom: 1em;
}

.tracks-modal .track-header {
	display: flex;
	align-items: center;
	gap: 1em;
}

.tracks-modal .track-name {
	font-weight: bold;
	flex: 1 1 auto;
}

.tracks-modal .track-btns {
	display: flex;
	gap: 0.5em;
}

.tracks-modal .track-btns button,
.tracks-modal .setting-item-extra-button {
	border: none;
	background: none;
	cursor: pointer;
	font-size: 1.1em;
	padding: 0.2em 0.5em;
	border-radius: 4px;
	transition: background 0.2s;
}

.tracks-modal .track-btns .active,
.tracks-modal .setting-item-extra-button.active {
	background: var(--interactive-accent, #4caf50);
	color: #fff;
}

.tracks-modal .track-param-row {
	display: flex;
	align-items: center;
	gap: 0.5em;
	margin-left: 2em;
}

.tracks-modal input[type='range'] {
	width: 120px;
}

.tracks-modal input[type='number'] {
	width: 3em;
	text-align: center;
}

/* 音轨模态框标题栏样式 */
.tracks-modal .modal-title-bar {
	display: flex;
	align-items: center;
	justify-content: space-between;
	margin-bottom: 1em;
	position: sticky;
	top: 0;
	background: var(--background-primary, #fff);
	z-index: 10;
}

.tracks-modal .modal-title-text {
	font-weight: bold;
}

.tracks-modal .modal-button-group {
	display: flex;
	gap: 0.5em;
}

/* 音轨模态框滚动容器样式 */
.tracks-modal .tracks-scroll-container {
	overflow-y: auto;
	max-height: 50vh;
	padding-right: 4px;
}

/* --- alphatex.css --- */
/* AlphaTex Editor View Styles */
.alphatex-editor-layout {
	display: flex;
	flex-direction: column;
	height: 100%;
}

.alphatex-editor-playbar {
	padding: 8px 12px;
	border-bottom: 1px solid var(--background-modifier-border);
	background: var(--background-secondary);
}

.alphatex-editor-toolbar {
	display: flex;
	gap: 8px;
	padding: 8px 12px;
	border-bottom: 1px solid var(--background-modifier-border);
	background: var(--background-secondary);
	align-items: center;
	justify-content: flex-end;
}

.alphatex-editor-toolbar .clickable-icon {
	padding: 6px;
	border-radius: 4px;
	transition: background 0.15s ease;
}

.alphatex-editor-toolbar .clickable-icon:hover {
	background: var(--background-modifier-hover);
}

.alphatex-editor-section,
.alphatex-preview-section {
	flex: 1 1 0;
	min-height: 0;
	overflow: hidden;
}

.alphatex-editor-layout.is-vertical .alphatex-editor-section,
.alphatex-editor-layout.is-vertical .alphatex-preview-section {
	flex: 1 1 50%;
}

.alphatex-editor-layout.is-horizontal {
	flex-direction: row;
}

.alphatex-editor-layout.is-horizontal .alphatex-editor-section,
.alphatex-editor-layout.is-horizontal .alphatex-preview-section {
	flex: 1 1 50%;
}

.alphatex-editor-wrapper {
	height: 100%;
	padding: 12px;
	background: var(--background-primary);
	/* 注意：不要在 wrapper 上直接增加 padding-bottom，因为 CodeMirror
	   的滚动容器位于内部，直接在 .cm-content 上添加伪元素可以
	   增加真实的滚动高度，从而使 "最后一行" 在滚动到底部时显得更高。 */
}

/* 在实际的滚动内容末尾增加占位，以扩展滚动高度并保留底部空白。 */
.alphatex-editor-wrapper .cm-content::after {
	content: '';
	display: block;
	/* 默认留白为页面高度的一半，方便最后一行在滚动到底部时向上留出更多空间 */
	height: var(--alphatex-editor-bottom-gap, 40vh);
	width: 1px;
	pointer-events: none;
}

/* 调整编辑器内部字体略小一些，避免占用过多垂直空间 */
.alphatex-editor-wrapper .cm-content,
.alphatex-editor-wrapper .cm-editor {
	font-size: var(--alphatex-editor-font-size, 0.95rem);
	line-height: 1.45;
}

.alphatex-editor-layout.is-horizontal .alphatex-editor-wrapper {
	border-bottom: none;
}

.alphatex-editor-layout.is-vertical .alphatex-editor-wrapper {
	border-right: none;
}

.alphatex-preview-section {
	padding: 12px;
	background: var(--background-primary);
	overflow: auto;
}

.alphatex-block {
	margin: 0.5rem 0 1rem 0;
}
.alphatex-score {
	width: 100%;
	overflow: auto;
}
.alphatex-controls {
	display: flex;
	flex-wrap: wrap;
	gap: 0.5rem;
	align-items: center;
	/* margin-top: 0.5rem; */
}
.alphatex-controls .atx-btn {
	padding: 0.25rem 0.5rem;
	border: 1px solid var(--background-modifier-border);
	background: var(--interactive-normal);
	color: var(--text-normal);
	cursor: pointer;
}
.alphatex-controls .atx-label {
	display: inline-flex;
	gap: 0.25rem;
	align-items: center;
}

/* Background for visible whitespace characters (spaces/tabs) in the editor. */
:root {
	--alphatex-space-bg: rgba(0, 0, 0, 0.03);
}
/* Style for visible whitespace characters decorated by whitespaceHighlightPlugin */
.inmarkdown-editor-cm .cm-content .cm-whitespace,
.cm-editor .cm-content .cm-whitespace,
.cm-content .cm-whitespace {
	/* use theme-aware hover modifier as whitespace background for better integration */
	background: var(--background-modifier-hover, var(--alphatex-space-bg));
	display: inline-block; /* allow padding/background to be visible */
	border-radius: 2px;
	padding: 0 2px;
	line-height: 1;
}

/* Render regular ASCII space as a mid-dot, keep original editor background */
.cm-content .cm-whitespace-space {
	/* keep background transparent so original bg shows through */
	background: transparent;
	color: transparent; /* hide the real space */
	position: relative;
}
.cm-content .cm-whitespace-space::before {
	content: '·';
	color: var(--text-muted);
	position: absolute;
	left: 0;
	right: 0;
	text-align: center;
	pointer-events: none;
}
.cm-content .cm-surrounded {
	/* use theme highlight background; fallback to light red */
	background: var(--background-modifier-hover, rgba(220, 38, 38, 0.12));
	border-radius: 3px;
	border: 1px solid var(--background-modifier-border);
	display: inline-block;
	padding: 0 2px;
}
.alphatex-error {
	color: var(--text-error);
}
.alphatex-note {
	color: var(--text-muted);
}

/* 错误消息容器使用flexbox布局 */
.alphatex-messages {
	display: flex;
	flex-direction: column;
	gap: 0.25rem;
}

/* 错误消息容器中的复制按钮靠右显示 */
.alphatex-messages .clickable-icon[aria-label='复制错误与原文'] {
	align-self: flex-end;
	margin-bottom: 0.25rem;
}

/* markdown post processing*/

/* Highlight for dot symbol in embedded editor */
.highlighted-dot {
	/* Simple dot highlight: use accent color and bold weight only. */
	display: inline-block;
	color: var(--text-accent, var(--color-accent));
	background: transparent;
	font-weight: 700;
	padding: 0 1px;
}

/* Highlight for bar line symbol (|) in embedded editor */
.highlighted-bar {
	background-color: var(--color-accent);
	opacity: 0.5;
	border-radius: 2px;
}

/* Token styling for AlphaTex language tokens */
.cm-content .cm-atx-meta,
.atx-meta {
	color: var(--text-accent);
	font-weight: 600;
}

.cm-content .cm-atx-comment,
.atx-comment {
	color: var(--text-muted);
	opacity: 0.9;
}

/* Brackets and braces styling (for () and {}) */
.cm-content .cm-bracket,
.cm-bracket,
.atx-bracket {
	color: var(--color-accent);
	font-weight: 700;
}

/* Metadata backslash tokens (e.g. \title, \tempo) */
.cm-content .cm-meta,
.cm-meta,
.atx-meta {
	color: var(--text-accent);
	font-weight: 700;
}

/* Comments styling (// ...) */
.cm-content .cm-comment,
.cm-comment {
	color: var(--text-muted);
}

.cm-content .cm-atx-keyword,
.atx-keyword {
	color: var(--color-accent);
	font-weight: 600;
}

.cm-content .cm-atx-string,
.atx-string {
	color: var(--text-success);
}

.cm-content .cm-atx-number,
.atx-number {
	color: var(--text-faint);
}

/* Bars and section dots */
.cm-content .cm-atx-bar,
.atx-bar {
	background-color: transparent;
	color: var(--color-accent);
	font-weight: 700;
	padding: 0 2px;
}

/* Section separator dot rendered larger and aligned */
.cm-content .cm-dot,
.highlighted-dot,
.atx-dot {
	/* Keep dot highlight minimal: accent color and bold. Avoid custom fonts/size/offsets. */
	display: inline-block;
	color: var(--text-accent, var(--color-accent));
	font-weight: 700;
	padding: 0 1px;
}

/* Note tokens (fret.string.duration) */
.cm-content .cm-note,
.atx-note {
	color: var(--text-normal);
	font-weight: 600;
}

/* Chord group */
.cm-content .cm-chord,
.atx-chord {
	color: var(--text-accent);
	background: rgba(0, 0, 0, 0.02);
	border-radius: 2px;
	padding: 0 2px;
}

/* Effect blocks { ... } */
.cm-content .cm-effect,
.atx-effect {
	color: var(--text-warning);
	font-weight: 600;
}

/* Bar number widget (kept) */
.bar-number {
	color: var(--text-muted);
	font-size: 0.8em;
	font-weight: bold;
	margin-left: 2px;
	opacity: 0.7;
}

/* Debug highlight styles: high-contrast, intentionally loud for visual inspection */
.cm-debug-meta {
	background: rgba(255, 105, 180, 0.12);
	color: #ff69b4;
	font-weight: 700;
}
.cm-debug-string {
	background: rgba(255, 99, 71, 0.06);
	color: #ff4500;
	font-weight: 700;
}
.cm-debug-number {
	background: rgba(255, 165, 0, 0.06);
	color: #ff8c00;
	font-weight: 700;
}
.cm-debug-note {
	background: rgba(255, 235, 59, 0.08);
	color: #b58900;
	font-weight: 800;
}
.cm-debug-effect-key {
	background: rgba(218, 112, 214, 0.08);
	color: #800080;
	font-weight: 800;
}
.cm-debug-effect-arg {
	background: rgba(173, 255, 47, 0.06);
	color: #6b8e23;
	font-weight: 700;
}
.cm-debug-lbrace,
.cm-debug-rbrace {
	background: rgba(30, 144, 255, 0.06);
	color: #1e90ff;
	font-weight: 800;
}
.cm-debug-lparen,
.cm-debug-rparen {
	background: rgba(100, 149, 237, 0.04);
	color: #4b6cb7;
	font-weight: 700;
}
.cm-debug-pipe {
	background: rgba(148, 0, 211, 0.12);
	color: #9400d3;
	font-weight: 900;
	border-radius: 2px;
}
.cm-debug-lessthan {
	background: rgba(0, 206, 209, 0.06);
	color: #008b8b;
	font-weight: 700;
}
.cm-debug-dot {
	background: rgba(0, 191, 165, 0.06);
	color: #00695c;
	font-weight: 900;
}
.cm-debug-duration {
	background: rgba(255, 215, 0, 0.06);
	color: #b8860b;
	font-weight: 700;
}
.cm-debug-multiply {
	background: rgba(199, 21, 133, 0.06);
	color: #c71585;
	font-weight: 800;
}

/* make debug marks slightly padded so they're visible inline */
.cm-debug-meta,
.cm-debug-string,
.cm-debug-number,
.cm-debug-note,
.cm-debug-effect-key,
.cm-debug-effect-arg,
.cm-debug-pipe,
.cm-debug-dot {
	padding: 0 2px;
	border-radius: 2px;
}

/* 当前小节信息栏 */
.alphatex-bar-info {
	padding: 8px 12px;
	border-bottom: 1px solid var(--background-modifier-border);
	background: var(--background-secondary);
	font-size: 0.9em;
	color: var(--text-muted);
	text-align: center;
}

/* New styles for TextMate-inspired tokens, no background to match original */
.cm-duration {
	color: #b8860b;
	font-weight: 700;
	padding: 0 2px;
	border-radius: 2px;
}

.cm-effect-beat {
	color: #800080;
	font-weight: 800;
	padding: 0 2px;
	border-radius: 2px;
}

.cm-effect-note {
	color: #6b8e23;
	font-weight: 700;
	padding: 0 2px;
	border-radius: 2px;
}

.cm-tuning {
	color: #ff4500;
	font-weight: 700;
	padding: 0 2px;
	border-radius: 2px;
}

.cm-boolean {
	color: #ff8c00;
	font-weight: 700;
	padding: 0 2px;
	border-radius: 2px;
}

.cm-metadata {
	color: var(--text-accent);
	font-weight: 700;
	padding: 0 2px;
	border-radius: 2px;
}

/* --- debug.css --- */
/* .debug-bar {
	display: none !important;
} */

/* DebugBar 样式 */
.debug-bar {
	display: flex;
	flex-wrap: wrap;
	align-items: center;
	gap: 0.5em;
	padding: 0.5em;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: var(--radius-s);
	margin: 0.5em 0;
}

.debug-bar .control-label {
	margin-left: 1em;
}

.debug-bar .audio-status {
	margin-left: 1em;
	font-size: 0.9em;
}

.debug-bar .scroll-separator {
	margin: 0 0.5em;
}

.debug-bar .slider-control {
	width: 80px;
}

.debug-bar .small-slider {
	width: 60px;
}

.debug-bar .disabled-label {
	opacity: 0.5;
}

/* --- doc.css --- */
/* Basic layout for TabFlow documentation view */
.tabflow-doc-header {
	padding: 12px 16px;
	border-bottom: 1px solid var(--background-modifier-border);
	display: flex;
	align-items: center;
	justify-content: space-between;
}

.tabflow-doc-header h2 {
	margin: 0;
	font-size: 1.5em;
	font-weight: 600;
}

.tabflow-doc-header-btns {
	display: flex;
	gap: 8px;
	justify-content: flex-end;
	align-items: center;
}

/* Two-column layout: left sidebar (navigation) + main content */
.tabflow-doc-layout {
	display: flex;
	gap: 16px;
	align-items: flex-start;
	margin: 12px 16px 0 16px;
}

.tabflow-doc-layout.is-narrow {
	display: block;
}

.tabflow-doc-left {
	width: 220px;
	min-width: 160px;
	max-width: 30%;
}

.tabflow-doc-main {
	flex: 1 1 auto;
	background: transparent;
	min-width: 0;
	/* allow content to shrink within flex to avoid overflow */
}

/* Navigation styling */
.tabflow-nav {
	background: var(--background-modifier-hover);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	padding: 8px;
}

.tabflow-nav ul {
	list-style: none;
	margin: 0;
	padding: 0;
}

.tabflow-nav .tab-item {
	padding: 8px 10px;
	margin: 4px 0;
	border-radius: 4px;
	cursor: default;
	color: var(--text-normal);
}

.tabflow-nav .tab-item:hover {
	background: var(--background-modifier-hover);
}

.tabflow-nav .tab-item--active {
	background: var(--interactive-accent);
	color: var(--text-on-accent, #fff);
}

/* Main content placeholder */
.tabflow-doc-main-content {
	background: var(--background-secondary);
	border: 1px dashed var(--background-modifier-border);
	border-radius: 6px;
	padding: 16px;
}

/* Embedded AlphaTex markdown editor styling */
.alphatex-playground {
	display: flex;
	gap: 12px;
}

.alphatex-playground.is-vertical {
	flex-direction: column;
}

.alphatex-playground.is-horizontal {
	flex-direction: row;
	align-items: stretch;
}

.alphatex-playground.is-horizontal .inmarkdown-editor,
.alphatex-playground.is-horizontal .inmarkdown-preview {
	flex: 1 1 0;
	min-width: 0;
}

.inmarkdown-editor-cm {
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-primary);
	padding: 6px 8px;
	margin-bottom: 12px;
	position: relative;
}

.inmarkdown-editor-toolbar {
	position: absolute;
	top: 6px;
	right: 6px;
	display: flex;
	gap: 6px;
}

.inmarkdown-editor-toolbar .clickable-icon {
	padding: 4px;
	border-radius: 4px;
}

.inmarkdown-editor-toolbar .clickable-icon:hover {
	background: var(--background-modifier-hover);
}
.inmarkdown-editor-toolbar .clickable-icon.is-success {
	background: var(--background-modifier-success);
}

.inmarkdown-editor-cm:focus-within {
	border-color: var(--interactive-accent);
	box-shadow: 0 0 0 2px color-mix(in srgb, var(--interactive-accent) 40%, transparent);
}

.inmarkdown-editor-cm .cm-editor {
	background: transparent;
	font-family: var(--font-monospace);
	font-size: 18px;
	line-height: 2;
	max-height: 600px;
	/* keep a reasonable height */
	overflow: auto;
}

.inmarkdown-editor-cm .cm-scroller {
	padding: 4px 2px;
}

.inmarkdown-editor-cm .cm-content {
	padding: 0;
}

.inmarkdown-preview {
	margin-top: 4px;
}

.alphatex-playground.is-horizontal .inmarkdown-preview {
	margin-top: 0;
}

/* Viewport fallback: narrow screens force vertical */
@media (max-width: 720px) {
	.alphatex-playground.is-horizontal {
		flex-direction: column;
	}

	.alphatex-playground.is-horizontal .inmarkdown-preview {
		margin-top: 4px;
	}
}

.tabflow-doc-content {
	min-height: 320px;
	padding: 16px;
	background: var(--background-secondary);
	border-radius: 4px;
	max-width: 90ch;
	margin: 12px 16px;
}

.tabflow-doc-markdown {
	width: 100%;
	box-sizing: border-box;
}

.tabflow-doc-footer {
	padding: 8px 16px;
	border-top: 1px solid var(--background-modifier-border);
}

.playbar-placeholder {
	color: var(--text-muted);
}

/* Two-column layout: left navigation + main content */
.tabflow-doc-layout {
	display: flex;
	gap: 16px;
	align-items: stretch;
}

.tabflow-doc-layout.is-narrow {
	display: block;
}

/* Narrow mode (per-view): make left sidebar full width above content */
.tabflow-doc-layout.is-narrow .tabflow-doc-left {
	width: 100%;
	max-width: none;
	margin-bottom: 12px;
}

.tabflow-doc-layout.is-narrow .tabflow-doc-main {
	width: 100%;
	box-sizing: border-box;
}

.tabflow-doc-left {
	width: 240px;
	min-width: 180px;
}

.tabflow-doc-main {
	flex: 1 1 auto;
	background: transparent;
	min-width: 0;
	/* allow content to shrink within flex to avoid overflow */
}

.tabflow-doc-nav {
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	padding: 8px;
}

.tabflow-doc-tab {
	padding: 8px 10px;
	border-radius: 4px;
	cursor: pointer;
	color: var(--text-normal);
	margin-bottom: 6px;
}

.tabflow-doc-tab:hover {
	background: var(--background-modifier-hover);
}

.tabflow-doc-tab.active {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	font-weight: 600;
}

.tabflow-doc-main .tabflow-doc-markdown {
	padding: 12px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	width: 100%;
	box-sizing: border-box;
}

/* Host wrapper for each playground instance in docs */
.doc-playground-host {
	margin: 16px 0 20px 0;
	/* enable container queries for responsive playground */
	container-type: inline-size;
}

/* Container query: if host is narrow, force vertical */
@container (max-width: 720px) {
	.doc-playground-host .alphatex-playground.is-horizontal {
		flex-direction: column;
	}

	.doc-playground-host .alphatex-playground.is-horizontal .inmarkdown-preview {
		margin-top: 4px;
	}
}

/* Ensure AlphaTex containers do not exceed panel width */
.alphatex-block {
	max-width: 100%;
}

.alphatex-score {
	width: 100%;
	max-width: 100%;
}

.alphatex-score svg {
	max-width: 100%;
	height: auto;
}

/* In-panel prev/next navigation (Hugo-like) */
.doc-nav {
	display: flex;
	gap: 12px;
	margin-top: 20px;
	align-items: stretch;
	flex-wrap: nowrap;
}

.doc-nav.two .doc-nav-item {
	flex: 1 1 0;
}

.doc-nav.one .doc-nav-item {
	flex: 1 1 100%;
}

.doc-nav-item {
	padding: 14px 16px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
	background: var(--background-secondary);
	cursor: pointer;
	display: flex;
	flex-direction: column;
	min-height: 72px;
	transition:
		background 120ms ease,
		border-color 120ms ease,
		transform 120ms ease;
}

.doc-nav-item:hover {
	background: var(--background-modifier-hover);
	border-color: var(--interactive-accent);
	transform: translateY(-1px);
}

.doc-nav-item.is-disabled {
	opacity: 0.5;
	cursor: not-allowed;
}

.doc-nav-item--prev {
	justify-self: start;
}

.doc-nav-item--next {
	justify-self: stretch;
	text-align: left;
}

.doc-nav-label {
	font-size: 13px;
	color: var(--text-muted);
}

.doc-nav-title {
	font-size: 16px;
	font-weight: 600;
	color: var(--text-normal);
}

@media (max-width: 500px) {
	.doc-nav {
		flex-direction: column;
	}
}

/* Responsive: keep single column */
@media (max-width: 900px) {
	.tabflow-doc-content {
		padding: 12px;
		margin: 8px;
	}

	/* Stack sidebar above main content on narrow screens */
	.tabflow-doc-layout {
		display: block;
		margin: 8px 0;
	}

	.tabflow-doc-left {
		width: 100%;
		max-width: none;
		margin-bottom: 12px;
	}

	.tabflow-doc-main {
		width: 100%;
		box-sizing: border-box;
	}
}

/* 快速滚动动画设置 */
.tabflow-doc-layout {
	scroll-behavior: smooth;
	scroll-behavior: smooth !important;
}

/* 使用更快的滚动时长和缓动函数 */
.tabflow-doc-layout * {
	scroll-behavior: smooth;
	transition: scroll-behavior 0.08s ease-out; /* 从0.15s减少到0.08s，使用ease-out让开始更快 */
}

/* 针对滚动容器的优化 */
.tabflow-doc-markdown {
	scroll-behavior: smooth;
	scroll-margin-top: 20px;
	scroll-behavior: smooth !important;
}

/* 使用CSS变量控制滚动速度 */
:root {
	--scroll-duration: 0.05s;
	--scroll-easing: cubic-bezier(0.4, 0, 0.2, 1); /* 更快的缓动曲线 */
}

/* 确保滚动动画在不同浏览器中表现一致 */
@media (prefers-reduced-motion: no-preference) {
	.tabflow-doc-layout {
		scroll-behavior: smooth;
		scroll-behavior: smooth !important;
	}

	.tabflow-doc-layout * {
		scroll-behavior: smooth;
		scroll-behavior: smooth !important;
		transition: scroll-behavior var(--scroll-duration) var(--scroll-easing);
	}

	/* 特别针对滚动容器的优化 */
	.tabflow-doc-markdown {
		scroll-behavior: smooth;
		scroll-behavior: smooth !important;
		transition: scroll-behavior var(--scroll-duration) var(--scroll-easing);
	}
}

/* Articulation table copy buttons */
.articulation-table .copy-btn {
	background: transparent;
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	padding: 4px 8px;
	cursor: pointer;
	font-size: 14px;
	color: var(--text-normal);
	transition:
		border-color 0.2s ease,
		background-color 0.2s ease;
	min-width: auto;
	width: 100%;
	text-align: left;
}

.articulation-table .copy-btn:hover {
	border-color: var(--interactive-accent);
	background-color: var(--background-modifier-hover);
}

.articulation-table .copy-btn:active {
	background-color: var(--background-modifier-active);
}

/* --- play.css --- */
/* 播放栏自定义按钮样式 */
.play-bar {
	position: absolute;
	left: 0;
	right: 0;
	bottom: 0;
	z-index: 100;
	height: calc(var(--status-bar-height) * 2);
	background: var(--status-bar-background);
	display: flex;
	align-items: center;
	justify-content: center;
	box-shadow: 0 -1px 0 var(--background-modifier-border);
	padding: 0 16px;
}
.play-bar-btn:hover,
.play-bar-btn:focus {
	background: var(--interactive-hover);
	color: var(--text-accent);
	outline: none;
}
.play-bar-btn:active {
	background: var(--background-modifier-selected);
}
.play-bar-btn span {
	display: inline-flex;
	align-items: center;
}

.play-bar {
	position: absolute;
	left: 0;
	right: 0;
	bottom: 0;
	z-index: 100;
	background: var(--background-primary);
	display: flex;
	flex-direction: row;
	align-items: center;
	justify-content: flex-start; /* 从左到右顺序排列，左对齐 */
	gap: 6px;
	box-shadow: 0 -1px 0 var(--background-modifier-border);
	padding: var(--size-4-2) var(--size-4-2);
}

/* 播放栏各分区样式 */
.play-bar-section {
	display: flex;
	align-items: center;
}

.play-controls {
	gap: 4px;
	min-width: 40px;
	width: 60px; /* 固定宽度 */
	justify-content: flex-start; /* 左侧对齐 */
	padding-right: 10px;
}

.play-status {
	font-size: var(--font-ui-small);
	color: var(--text-muted);
	min-width: 40px;
	width: 60px; /* 固定宽度 */
	justify-content: flex-end; /* 右侧对齐 */
	padding-left: 10px;
}

/* 确保按钮符合 Obsidian 的风格 */
.play-bar .clickable-icon {
	color: var(--icon-color);
	padding: 4px;
	border-radius: var(--radius-s);
	cursor: pointer;
}

.play-bar .clickable-icon:hover {
	color: var(--icon-color-hover);
	background-color: var(--interactive-hover);
}

/* 激活态：高亮图标本身而不仅是背景 */
.play-bar .clickable-icon.is-active {
	color: var(--interactive-accent);
	background-color: var(--interactive-hover);
}
.play-bar .clickable-icon.is-active svg {
	stroke: currentColor;
}

/* 进度条相关样式 */
/* 简化布局后，进度条容器规则可保留宽度控制 */
.play-progress-container {
	display: flex;
	align-items: center;
	gap: 8px;
	min-width: 200px;
	max-width: 800px;
}

.play-time {
	font-size: var(--font-ui-smaller);
	color: var(--text-muted);
	font-family: var(--font-monospace);
	min-width: 36px;
	text-align: center;
}

.progress-bar-container {
	position: relative;
	flex: 1;
	height: 12px;
	display: flex;
	align-items: center;
	cursor: pointer;
	max-width: 600px; /* 硬编码进度条容器的最大宽度 */
	width: 100%; /* 确保它占用可用空间但不超过最大宽度 */
}

.progress-bar {
	position: relative;
	width: 100%;
	height: 4px;
	background-color: var(--background-modifier-border);
	border-radius: 2px;
	overflow: visible;
}

.progress-fill {
	position: absolute;
	height: 100%;
	width: 0;
	background-color: var(--interactive-accent);
	border-radius: 2px;
	transition: width 0.1s ease;
	/* 确保从左边开始填充 */
	left: 0;
	top: 0;
}

.progress-handle {
	position: absolute;
	top: 50%;
	/* 使用transform确保手柄中心对齐到进度位置 */
	transform: translate(-50%, -50%);
	width: 12px;
	height: 12px;
	background-color: var(--interactive-accent);
	border-radius: 50%;
	box-shadow: 0 0 3px rgba(0, 0, 0, 0.2);
	opacity: 0;
	transition: opacity 0.2s ease;
	cursor: grab;
	z-index: 10; /* 确保手柄在进度条上方 */
}

/* 拖动状态样式 */
.progress-handle:active,
.progress-bar:active .progress-handle {
	cursor: grabbing;
	opacity: 1;
}

.progress-bar:hover .progress-handle,
.progress-bar:active .progress-handle,
.progress-bar.dragging .progress-handle,
.progress-handle.dragging,
.progress-handle:hover {
	opacity: 1;
}

/* 拖动时的增强视觉反馈 */
.progress-bar.dragging {
	cursor: grabbing;
}

.progress-handle.dragging {
	cursor: grabbing;
	transform: translate(-50%, -50%) scale(1.2);
	box-shadow: 0 0 8px rgba(0, 0, 0, 0.3);
}

/* 为内容添加底部边距，避免被播放栏遮挡 */
.view-content > .tab-view .content {
	margin-bottom: calc(var(--status-bar-height) * 2 + 8px);
}

/* 播放栏控件图标样式 */
.play-bar .speed-icon {
	margin-right: 0.5em;
}

.play-bar .stave-icon {
	margin-left: 1em;
	margin-right: 0.5em;
}

.play-bar .zoom-icon {
	margin-left: 1em;
	margin-right: 0.5em;
}

/* 音频播放器样式 */
.audio-player-container {
	display: flex;
	align-items: center;
	width: 100%;
	gap: 8px;
}

.audio-player-container audio {
	width: 100%;
	height: 32px;
}

/* --- playbar.css --- */
/* PlayBar - 播放控制栏样式 (参考 DebugBar 设计) */

/* ============================================
   主容器 - 圆角边框 + flex-wrap 布局
   ============================================ */
.tab-flow-play-bar {
	display: flex;
	flex-wrap: wrap;
	align-items: center;
	gap: 0.5em;
	padding: 0.5em;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: var(--radius-s);
	margin: 0.5em 0;
	flex-shrink: 0;
	user-select: none;
}

/* ============================================
   播放控制按钮组
   ============================================ */
.play-bar-controls {
	display: flex;
	align-items: center;
	gap: 4px;
}

.play-bar-btn {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 32px;
	height: 32px;
	padding: 0;
	border: none;
	border-radius: var(--radius-s);
	background: transparent;
	color: var(--text-muted);
	cursor: pointer;
	transition: all 0.15s ease;
}

.play-bar-btn:hover:not(:disabled) {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

.play-bar-btn:active:not(:disabled) {
	background: var(--background-modifier-active-hover);
	transform: scale(0.95);
}

.play-bar-btn:disabled {
	opacity: 0.3;
	cursor: not-allowed;
}

/* 播放/暂停按钮特殊样式 */
.play-pause-btn.playing {
	color: var(--interactive-accent);
}

.play-pause-btn.playing:hover:not(:disabled) {
	color: var(--interactive-accent-hover);
}

/* SVG 图标样式 */
.play-bar-btn svg {
	width: 18px;
	height: 18px;
	stroke-width: 2;
}

/* ============================================
   时间显示
   ============================================ */
.play-bar-time {
	display: flex;
	align-items: center;
	gap: 4px;
	font-family: var(--font-monospace);
	font-size: 13px;
	color: var(--text-normal);
	font-variant-numeric: tabular-nums;
	min-width: 90px;
	margin-left: 0.5em;
}

.time-current {
	color: var(--interactive-accent);
	font-weight: 500;
}

.time-separator {
	color: var(--text-muted);
}

.time-total {
	color: var(--text-muted);
}

/* ============================================
   速度控制
   ============================================ */
.play-bar-speed {
	display: flex;
	align-items: center;
	gap: 4px;
	margin-left: 0.5em;
}

.speed-label {
	font-size: 13px;
	color: var(--text-muted);
}

.speed-select {
	padding: 2px 6px;
	border: 1px solid var(--background-modifier-border);
	border-radius: var(--radius-s);
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: 13px;
	cursor: pointer;
	transition: border-color 0.15s ease;
}

.speed-select:hover {
	border-color: var(--interactive-accent);
}

.speed-select:focus {
	outline: none;
	border-color: var(--interactive-accent);
	box-shadow: 0 0 0 2px rgba(var(--interactive-accent-rgb), 0.2);
}

/* ============================================
   节拍器开关
   ============================================ */
.play-bar-metronome {
	display: flex;
	align-items: center;
	gap: 4px;
	margin-left: 0.5em;
}

.metronome-label {
	font-size: 13px;
	color: var(--text-muted);
}

.play-bar-metronome input[type='checkbox'] {
	cursor: pointer;
}

/* ============================================
   状态指示器
   ============================================ */
.play-bar-status {
	margin-left: auto;
	font-size: 12px;
	color: var(--text-faint);
	font-style: italic;
}

/* ============================================
   响应式设计 - 小屏幕优化
   ============================================ */
@media (max-width: 768px) {
	.tab-flow-play-bar {
		gap: 0.4em;
		padding: 0.4em;
	}

	.play-bar-btn {
		width: 28px;
		height: 28px;
	}

	.play-bar-btn svg {
		width: 16px;
		height: 16px;
	}

	.play-bar-time {
		font-size: 12px;
		min-width: 80px;
	}

	.speed-select,
	.speed-label,
	.metronome-label {
		font-size: 12px;
	}
}

/* ============================================
   深色/浅色模式优化
   ============================================ */
.theme-dark .tab-flow-play-bar {
	background: var(--background-primary-alt);
}

.theme-light .tab-flow-play-bar {
	background: var(--background-secondary);
}

/* ============================================
   聚焦样式 - 键盘导航
   ============================================ */
.play-bar-btn:focus-visible,
.speed-select:focus-visible {
	outline: 2px solid var(--interactive-accent);
	outline-offset: 2px;
}

/* ============================================
   加载状态
   ============================================ */
.play-bar-btn.loading {
	pointer-events: none;
	opacity: 0.6;
}

.play-bar-btn.loading svg {
	animation: spin 1s linear infinite;
}

@keyframes spin {
	from {
		transform: rotate(0deg);
	}
	to {
		transform: rotate(360deg);
	}
}

/* --- player-cursor.css --- */
/* ============================================
   AlphaTab 播放器光标样式
   符合 Obsidian 主题的播放指示器
   ============================================ */

/* 
 * 1. 小节光标 - 当前播放小节的背景高亮
 * 使用半透明的主题色调，不遮挡乐谱内容
 */
.at-cursor-bar {
	background: var(--interactive-accent, #7c3aed);
	opacity: 0.08;
	transition: opacity 0.1s ease;
}

/* 深色模式下调整透明度 */
.theme-dark .at-cursor-bar {
	opacity: 0.12;
}

/* 
 * 2. 拍子光标 - 当前拍的竖线指示器
 * 使用主题色的垂直线条，清晰指示播放位置
 */
.at-cursor-beat {
	background: var(--interactive-accent, #7c3aed);
	opacity: 0.75;
	width: 3px;
	border-radius: 1px;
	transition: opacity 0.1s ease;
}

/* 深色模式下增强可见度 */
.theme-dark .at-cursor-beat {
	opacity: 0.85;
	box-shadow: 0 0 4px rgba(124, 58, 237, 0.3);
}

/* 
 * 3. 选择范围背景 - 用户选择的播放范围
 * 使用主题色的淡背景，区分选择区域
 */
.at-selection div {
	background: var(--interactive-accent, #7c3aed);
	opacity: 0.1;
	transition: opacity 0.15s ease;
}

/* 悬停时增强反馈 */
.at-selection div:hover {
	opacity: 0.15;
}

/* 深色模式下的选择范围 */
.theme-dark .at-selection div {
	opacity: 0.15;
}

.theme-dark .at-selection div:hover {
	opacity: 0.2;
}

/* 
 * 4. 音符高亮 - 正在播放的音符着色
 * 使用主题色填充和描边，SVG 元素着色
 */
.at-highlight * {
	fill: var(--interactive-accent, #7c3aed) !important;
	stroke: var(--interactive-accent, #7c3aed) !important;
	opacity: 0.9;
	transition:
		fill 0.1s ease,
		stroke 0.1s ease;
}

/* 深色模式下使用更亮的颜色 */
.theme-dark .at-highlight * {
	fill: var(--interactive-accent-hover, #8b5cf6) !important;
	stroke: var(--interactive-accent-hover, #8b5cf6) !important;
	opacity: 1;
}

/* 
 * 5. 性能优化 - 使用 GPU 加速
 * 确保光标移动流畅
 */
.at-cursor-bar,
.at-cursor-beat,
.at-selection div,
.at-highlight {
	will-change: transform, opacity;
}

/* 
 * 6. 可访问性增强 - 高对比度模式
 * 在系统高对比度模式下提供更清晰的指示器
 */
@media (prefers-contrast: high) {
	.at-cursor-bar {
		opacity: 0.2;
		outline: 2px solid var(--interactive-accent);
	}

	.at-cursor-beat {
		width: 4px;
		opacity: 1;
	}

	.at-selection div {
		opacity: 0.25;
		outline: 1px solid var(--interactive-accent);
	}

	.at-highlight * {
		opacity: 1 !important;
	}
}

/* 
 * 7. 减少动画模式 - 尊重用户偏好
 * 当用户偏好减少动画时，移除过渡效果
 */
@media (prefers-reduced-motion: reduce) {
	.at-cursor-bar,
	.at-cursor-beat,
	.at-selection div,
	.at-highlight * {
		transition: none;
	}
}

/* 
 * 8. 打印模式 - 隐藏所有光标
 * 打印时不显示播放指示器
 */
@media print {
	.at-cursor-bar,
	.at-cursor-beat,
	.at-selection,
	.at-highlight {
		display: none !important;
	}
}

/* 
 * 9. 响应式调整 - 小屏幕优化
 * 在移动设备上使用更醒目的指示器
 */
@media (max-width: 768px) {
	.at-cursor-beat {
		width: 4px;
	}

	.at-cursor-bar {
		opacity: 0.12;
	}

	.theme-dark .at-cursor-bar {
		opacity: 0.16;
	}
}

/* 
 * 10. 焦点状态 - 键盘导航时的光标增强
 * 当用户使用键盘控制播放时，增强光标可见度
 */
.tab-flow-player-container:focus-within .at-cursor-beat {
	opacity: 0.9;
	box-shadow: 0 0 6px var(--interactive-accent);
}

.theme-dark .tab-flow-player-container:focus-within .at-cursor-beat {
	opacity: 1;
	box-shadow: 0 0 8px var(--interactive-accent-hover);
}

/* --- settings-panel.css --- */
/* Settings Panel - 调试和配置面板样式 */

.settings-panel {
	position: fixed;
	top: 0;
	right: -400px; /* 初始隐藏在右侧 */
	width: 400px;
	height: 100vh;
	background-color: var(--background-primary);
	border-left: 1px solid var(--background-modifier-border);
	box-shadow: -2px 0 8px rgba(0, 0, 0, 0.1);
	display: flex;
	flex-direction: column;
	z-index: 1000;
	transition: right 0.3s ease;
	overflow: hidden;
}

.settings-panel-open {
	right: 0;
}

/* Header */
.settings-panel-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 16px;
	border-bottom: 1px solid var(--background-modifier-border);
	background-color: var(--background-secondary);
}

.settings-panel-header h3 {
	margin: 0;
	font-size: 16px;
	font-weight: 600;
	color: var(--text-normal);
}

.settings-panel-close {
	background: transparent;
	border: none;
	font-size: 20px;
	color: var(--text-muted);
	cursor: pointer;
	padding: 4px 8px;
	border-radius: 4px;
	transition: all 0.2s;
}

.settings-panel-close:hover {
	background-color: var(--background-modifier-hover);
	color: var(--text-normal);
}

/* Content */
.settings-panel-content {
	flex: 1;
	overflow-y: auto;
	padding: 16px;
}

/* Settings Group */
.settings-group {
	margin-bottom: 24px;
}

.settings-group-title {
	font-size: 14px;
	font-weight: 600;
	color: var(--text-accent);
	margin: 0 0 12px 0;
	padding: 8px 0;
	border-bottom: 1px solid var(--background-modifier-border);
	cursor: pointer;
	user-select: none;
	display: flex;
	align-items: center;
	gap: 8px;
}

.settings-group-title:hover {
	color: var(--text-accent-hover);
}

.settings-group-icon {
	font-size: 10px;
	transition: transform 0.2s;
	display: inline-block;
}

.settings-group-icon.collapsed {
	transform: rotate(-90deg);
}

.settings-group-content {
	display: flex;
	flex-direction: column;
	gap: 12px;
}

/* Settings Item */
.settings-item {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 12px;
	padding: 8px 0;
}

.settings-item-label {
	font-size: 13px;
	color: var(--text-normal);
	flex: 1;
	min-width: 0;
	cursor: pointer;
}

.settings-item-control {
	flex-shrink: 0;
	min-width: 120px;
	display: flex;
	align-items: center;
	justify-content: flex-end;
}

/* Select */
.settings-select {
	width: 100%;
	padding: 4px 8px;
	background-color: var(--background-primary-alt);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	color: var(--text-normal);
	font-size: 12px;
	cursor: pointer;
	transition: all 0.2s;
}

.settings-select:hover {
	border-color: var(--background-modifier-border-hover);
}

.settings-select:focus {
	outline: none;
	border-color: var(--interactive-accent);
}

/* Number Input */
.settings-number {
	width: 80px;
	padding: 4px 8px;
	background-color: var(--background-primary-alt);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	color: var(--text-normal);
	font-size: 12px;
	text-align: right;
	transition: all 0.2s;
}

.settings-number:hover {
	border-color: var(--background-modifier-border-hover);
}

.settings-number:focus {
	outline: none;
	border-color: var(--interactive-accent);
}

/* Range Slider */
.settings-range-wrapper {
	display: flex;
	align-items: center;
	gap: 8px;
	width: 100%;
}

.settings-range {
	flex: 1;
	height: 4px;
	background: var(--background-modifier-border);
	border-radius: 2px;
	outline: none;
	-webkit-appearance: none;
}

.settings-range::-webkit-slider-thumb {
	-webkit-appearance: none;
	width: 16px;
	height: 16px;
	background: var(--interactive-accent);
	border-radius: 50%;
	cursor: pointer;
	transition: all 0.2s;
}

.settings-range::-webkit-slider-thumb:hover {
	transform: scale(1.2);
}

.settings-range::-moz-range-thumb {
	width: 16px;
	height: 16px;
	background: var(--interactive-accent);
	border: none;
	border-radius: 50%;
	cursor: pointer;
	transition: all 0.2s;
}

.settings-range::-moz-range-thumb:hover {
	transform: scale(1.2);
}

.settings-range-value {
	font-size: 11px;
	color: var(--text-muted);
	min-width: 40px;
	text-align: right;
}

/* Toggle */
.settings-toggle {
	position: relative;
	display: inline-block;
	width: 44px;
	height: 24px;
	cursor: pointer;
}

.settings-toggle input {
	opacity: 0;
	width: 0;
	height: 0;
}

.settings-toggle-slider {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background-color: var(--background-modifier-border);
	border-radius: 24px;
	transition: 0.3s;
}

.settings-toggle-slider:before {
	position: absolute;
	content: '';
	height: 18px;
	width: 18px;
	left: 3px;
	bottom: 3px;
	background-color: white;
	border-radius: 50%;
	transition: 0.3s;
}

.settings-toggle input:checked + .settings-toggle-slider {
	background-color: var(--interactive-accent);
}

.settings-toggle input:checked + .settings-toggle-slider:before {
	transform: translateX(20px);
}

/* Button Group */
.settings-button-group {
	display: flex;
	gap: 4px;
}

.settings-button {
	padding: 4px 12px;
	font-size: 11px;
	border: 1px solid var(--background-modifier-border);
	background-color: var(--background-primary-alt);
	color: var(--text-muted);
	border-radius: 4px;
	cursor: pointer;
	transition: all 0.2s;
	white-space: nowrap;
}

.settings-button:hover {
	background-color: var(--background-modifier-hover);
	color: var(--text-normal);
}

.settings-button-active {
	background-color: var(--interactive-accent);
	color: var(--text-on-accent);
	border-color: var(--interactive-accent);
}

/* Footer - Tools */
.settings-panel-footer {
	padding: 16px;
	border-top: 1px solid var(--background-modifier-border);
	background-color: var(--background-secondary);
}

.settings-panel-footer h4 {
	font-size: 13px;
	font-weight: 600;
	color: var(--text-normal);
	margin: 0 0 12px 0;
}

.settings-tools {
	display: flex;
	flex-direction: column;
	gap: 8px;
}

.settings-tool-button {
	padding: 8px 12px;
	background-color: var(--interactive-normal);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	color: var(--text-normal);
	font-size: 12px;
	cursor: pointer;
	transition: all 0.2s;
}

.settings-tool-button:hover {
	background-color: var(--interactive-hover);
	border-color: var(--interactive-accent);
}

.settings-tool-button:active {
	transform: scale(0.98);
}

.settings-tool-button-danger {
	background-color: var(--background-modifier-error);
	border-color: var(--background-modifier-error-border);
	color: var(--text-error);
}

.settings-tool-button-danger:hover {
	background-color: var(--background-modifier-error-hover);
	border-color: var(--background-modifier-error-border);
}

/* Scrollbar */
.settings-panel-content::-webkit-scrollbar {
	width: 8px;
}

.settings-panel-content::-webkit-scrollbar-track {
	background: var(--background-primary);
}

.settings-panel-content::-webkit-scrollbar-thumb {
	background: var(--background-modifier-border);
	border-radius: 4px;
}

.settings-panel-content::-webkit-scrollbar-thumb:hover {
	background: var(--text-muted);
}

/* Responsive - 窄屏时全屏显示 */
@media (max-width: 768px) {
	.settings-panel {
		width: 100vw;
		right: -100vw;
	}
}

/* --- settingtab.css --- */
.itabs-settings-tabs {
	display: flex;
	border-bottom: 1px solid var(--background-modifier-border);
	margin-bottom: 1em;
	gap: 0.5em;
}

.itabs-settings-tab {
	background: none;
	border: none;
	padding: 0.5em 1.5em;
	cursor: pointer;
	font-size: 1em;
	color: var(--text-normal);
	border-radius: 0.5em 0.5em 0 0;
	transition:
		background 0.2s,
		color 0.2s;
}

.itabs-settings-tab.active {
	border-bottom: 2px solid var(--interactive-accent);
	font-weight: bold;
	color: var(--interactive-accent);
	background: var(--background-secondary-alt);
}

.itabs-settings-tab:hover:not(.active) {
	background: var(--background-secondary);
}

.itabs-settings-contents {
	padding: 1em 0;
}

/* 针对特定插件设置项去除顶部边框，避免覆盖Obsidian原生样式 */
.itabs-settings-contents .setting-item.tabflow-no-border {
	border-top: none;
	padding: 0;
}

/* 组件卡片细节样式 */
.tabflow-card button {
	border: 1px solid var(--background-modifier-border);
	background: var(--background-secondary);
	color: var(--text-normal);
	border-radius: 6px;
	padding: 4px 8px;
}

.tabflow-card button:hover {
	background: var(--background-secondary-alt);
}

/* Clickable icon style to replace buttons for order controls */
.tabflow-card .icon-clickable {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	width: 28px;
	height: 28px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-secondary);
	color: var(--text-muted);
	border-radius: 6px;
	cursor: pointer;
	-webkit-user-select: none;
	user-select: none;
}

.tabflow-card .icon-clickable:hover {
	/* Accent-tinted hover background */
	background: color-mix(in srgb, var(--interactive-accent) 18%, var(--background-secondary-alt));
	color: var(--text-on-accent, var(--text-normal));
	box-shadow: 0 0 0 1px color-mix(in srgb, var(--interactive-accent) 35%, transparent) inset;
}

.tabflow-card .icon-clickable:focus-visible {
	outline: 2px solid var(--interactive-accent);
	outline-offset: 2px;
}

.tabflow-card .icon-clickable:active {
	background: color-mix(in srgb, var(--interactive-accent) 28%, var(--background-secondary-alt));
	color: var(--text-on-accent, var(--text-normal));
}

.tabflow-card.insert-before {
	box-shadow: 0 2px 0 0 var(--interactive-accent) inset;
}

.tabflow-card.insert-after {
	box-shadow: 0 -2px 0 0 var(--interactive-accent) inset;
}

.tabflow-card.swap-target {
	background: var(--background-modifier-hover);
	outline: 2px dashed var(--interactive-accent);
}

.tabflow-setting-description {
	color: var(--text-muted);
	font-size: 0.95em;
	margin-bottom: 0.5em;
}

pre.tabflow-setting-description {
	background-color: var(--background-secondary);
	padding: 12px 16px;
	border-radius: 6px;
	overflow-x: auto;
	font-family:
		-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
	font-size: 0.9em;
	line-height: 1.4;
	margin-top: 8px;
	margin-bottom: 16px;
	border: 1px solid var(--background-modifier-border);
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

pre.tabflow-setting-description code {
	white-space: pre;
	font-size: 0.9em;
	color: var(--text-normal);
}

ol.tabflow-setting-description,
ul.tabflow-setting-description {
	margin-left: 1.5em;
	margin-bottom: 0.5em;
}

ol.tabflow-setting-description li,
ul.tabflow-setting-description li {
	margin-bottom: 0.2em;
}

/* Invalid input styling */
.tabflow-invalid-input {
	border-color: var(--text-error, #e74c3c) !important;
	box-shadow: 0 0 0 1px var(--text-error, #e74c3c) !important;
}

/* Custom Highlight settings - Two column layout */
.tabflow-highlight-grid {
	display: grid;
	grid-template-columns: 1fr 1fr;
	gap: 6px;
	margin-top: 8px;
	margin-bottom: 8px;
}

/* Responsive design for smaller screens */
@media (max-width: 768px) {
	.tabflow-highlight-grid {
		grid-template-columns: 1fr;
		gap: 4px;
	}
}

/* Ensure setting items in grid don't have unwanted borders */
.tabflow-highlight-grid .setting-item {
	border-top: none !important;
	padding: 8px 12px;
	margin: 0;
}

/* Improve spacing for highlight preview elements */
.tabflow-highlight-grid .setting-item .setting-item-description {
	margin-top: 4px;
	font-size: 0.85em;
}

/* reset styling intentionally uses existing setting-item styles to match other reset buttons */

/* --- tracks.css --- */
/**
 * 音轨和五线谱组件样式
 */

/* ========== 音轨选择器模态框 ========== */

.tabflow-tracks-modal {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background-color: rgba(0, 0, 0, 0.5);
	display: none;
	align-items: center;
	justify-content: center;
	z-index: 1000;

	&.is-open {
		display: flex;
	}
}

.tabflow-tracks-panel {
	background-color: var(--background-primary);
	border-radius: 8px;
	box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
	max-width: 600px;
	max-height: 80vh;
	width: 90%;
	display: flex;
	flex-direction: column;
	overflow: hidden;
}

/* ========== 头部 ========== */

.tabflow-tracks-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 16px 20px;
	border-bottom: 1px solid var(--background-modifier-border);
}

.tabflow-tracks-title {
	margin: 0;
	font-size: 16px;
	font-weight: 600;
	color: var(--text-normal);
}

.tabflow-tracks-actions {
	display: flex;
	align-items: center;
	gap: 8px;
}

/* ========== 音轨列表 ========== */

.tabflow-tracks-list {
	flex: 1;
	overflow-y: auto;
	padding: 12px;
}

.tabflow-tracks-empty {
	display: flex;
	align-items: center;
	justify-content: center;
	padding: 40px 20px;
	color: var(--text-muted);

	p {
		margin: 0;
	}
}

/* ========== 底部信息 ========== */

.tabflow-tracks-footer {
	padding: 12px 20px;
	border-top: 1px solid var(--background-modifier-border);
	background-color: var(--background-secondary);
}

.tabflow-tracks-info {
	font-size: 12px;
	color: var(--text-muted);
}

/* ========== 音轨项 ========== */

.tabflow-track-item {
	background-color: var(--background-secondary);
	border-radius: 6px;
	padding: 12px;
	margin-bottom: 12px;

	&:last-child {
		margin-bottom: 0;
	}
}

.tabflow-track-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	margin-bottom: 12px;
}

.tabflow-track-info {
	display: flex;
	align-items: center;
	gap: 8px;
	flex: 1;
	min-width: 0;
}

.tabflow-track-checkbox {
	flex-shrink: 0;
	cursor: pointer;
}

.tabflow-track-name {
	flex: 1;
	font-weight: 500;
	color: var(--text-normal);
	cursor: pointer;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	margin: 0;
}

.tabflow-track-controls {
	display: flex;
	align-items: center;
	gap: 6px;
	flex-shrink: 0;
}

/* ========== 音轨设置项 ========== */

.tabflow-track-setting {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 8px 0;
	border-top: 1px solid var(--background-modifier-border);

	&:first-of-type {
		border-top: none;
	}
}

.tabflow-setting-label {
	font-size: 13px;
	color: var(--text-muted);
	flex-shrink: 0;
	margin-right: 12px;
}

.tabflow-setting-control {
	display: flex;
	align-items: center;
	gap: 8px;
	flex: 1;
	min-width: 0;
}

.tabflow-slider {
	flex: 1;
	min-width: 100px;
}

.tabflow-setting-value {
	font-size: 12px;
	color: var(--text-muted);
	min-width: 40px;
	text-align: right;
}

/* ========== 五线谱项 ========== */

.tabflow-staff-item {
	margin-top: 12px;
	padding-top: 12px;
	border-top: 1px solid var(--background-modifier-border);
}

.tabflow-staff-header {
	margin-bottom: 8px;
}

.tabflow-staff-label {
	font-size: 12px;
	color: var(--text-muted);
	font-weight: 500;
}

.tabflow-staff-controls {
	display: flex;
	gap: 6px;
	flex-wrap: wrap;
}

/* ========== 按钮样式 ========== */

.tabflow-btn {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	padding: 6px 12px;
	font-size: 13px;
	font-weight: 500;
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	background-color: var(--interactive-normal);
	color: var(--text-normal);
	cursor: pointer;
	transition: all 0.2s;

	&:hover:not(:disabled) {
		background-color: var(--interactive-hover);
	}

	&:active:not(:disabled) {
		transform: scale(0.98);
	}

	&:disabled {
		opacity: 0.5;
		cursor: not-allowed;
	}

	&.is-active {
		background-color: var(--interactive-accent);
		color: var(--text-on-accent);
		border-color: var(--interactive-accent);
	}

	&.is-muted {
		background-color: var(--background-modifier-error);
		color: var(--text-on-accent);
		border-color: var(--background-modifier-error);
	}
}

.tabflow-btn-sm {
	padding: 4px 8px;
	font-size: 12px;
}

.tabflow-btn-icon {
	padding: 6px;

	svg {
		display: block;
	}
}

.tabflow-btn-notation {
	min-width: 40px;
	padding: 6px 8px;
}

.tabflow-notation-icon {
	font-size: 16px;
	line-height: 1;
}

/* ========== 响应式设计 ========== */

@media (max-width: 768px) {
	.tabflow-tracks-panel {
		max-width: 95%;
		max-height: 90vh;
	}

	.tabflow-track-setting {
		flex-direction: column;
		align-items: stretch;
	}

	.tabflow-setting-label {
		margin-bottom: 6px;
	}

	.tabflow-setting-control {
		width: 100%;
	}
}

/* ========== 音轨管理按钮（PlayBar 中） ========== */

.track-count {
	margin-left: 4px;
	font-size: 11px;
	font-weight: 600;
	color: var(--text-muted);
}

.play-bar-btn:hover .track-count {
	color: var(--text-normal);
}

.play-bar-btn:disabled .track-count {
	opacity: 0.5;
}

/* ========== 暗色主题优化 ========== */

.theme-dark {
	.tabflow-tracks-modal {
		background-color: rgba(0, 0, 0, 0.7);
	}

	.tabflow-track-item {
		background-color: var(--background-primary-alt);
	}
}

