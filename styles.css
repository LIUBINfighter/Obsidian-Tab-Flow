/* build: build */
/* --- TrackModal.css --- */
.tracks-modal .setting-item {
	display: flex;
	flex-direction: column;
	gap: 0.5em;
	margin-bottom: 1em;
}

.tracks-modal .track-header {
	display: flex;
	align-items: center;
	gap: 1em;
}

.tracks-modal .track-name {
	font-weight: bold;
	flex: 1 1 auto;
}

.tracks-modal .track-btns {
	display: flex;
	gap: 0.5em;
}

.tracks-modal .track-btns button,
.tracks-modal .setting-item-extra-button {
	border: none;
	background: none;
	cursor: pointer;
	font-size: 1.1em;
	padding: 0.2em 0.5em;
	border-radius: 4px;
	transition: background 0.2s;
}

.tracks-modal .track-btns .active,
.tracks-modal .setting-item-extra-button.active {
	background: var(--interactive-accent, #4caf50);
	color: #fff;
}

.tracks-modal .track-param-row {
	display: flex;
	align-items: center;
	gap: 0.5em;
	margin-left: 2em;
}

.tracks-modal input[type='range'] {
	width: 120px;
}

.tracks-modal input[type='number'] {
	width: 3em;
	text-align: center;
}

/* 音轨模态框标题栏样式 */
.tracks-modal .modal-title-bar {
	display: flex;
	align-items: center;
	justify-content: space-between;
	margin-bottom: 1em;
	position: sticky;
	top: 0;
	background: var(--background-primary, #fff);
	z-index: 10;
}

.tracks-modal .modal-title-text {
	font-weight: bold;
}

.tracks-modal .modal-button-group {
	display: flex;
	gap: 0.5em;
}

/* 音轨模态框滚动容器样式 */
.tracks-modal .tracks-scroll-container {
	overflow-y: auto;
	max-height: 50vh;
	padding-right: 4px;
}

/* --- alphatex.css --- */
/* AlphaTex Editor View Styles */
.alphatex-editor-layout {
	display: flex;
	flex-direction: column;
	height: 100%;
}

.alphatex-editor-playbar {
	padding: 8px 12px;
	border-bottom: 1px solid var(--background-modifier-border);
	background: var(--background-secondary);
}

.alphatex-editor-toolbar {
	display: flex;
	gap: 8px;
	padding: 8px 12px;
	border-bottom: 1px solid var(--background-modifier-border);
	background: var(--background-secondary);
	align-items: center;
	justify-content: flex-end;
}

.alphatex-editor-toolbar .clickable-icon {
	padding: 6px;
	border-radius: 4px;
	transition: background 0.15s ease;
}

.alphatex-editor-toolbar .clickable-icon:hover {
	background: var(--background-modifier-hover);
}

.alphatex-editor-section,
.alphatex-preview-section {
	flex: 1 1 0;
	min-height: 0;
	overflow: hidden;
}

.alphatex-editor-layout.is-vertical .alphatex-editor-section,
.alphatex-editor-layout.is-vertical .alphatex-preview-section {
	flex: 1 1 50%;
}

.alphatex-editor-layout.is-horizontal {
	flex-direction: row;
}

.alphatex-editor-layout.is-horizontal .alphatex-editor-section,
.alphatex-editor-layout.is-horizontal .alphatex-preview-section {
	flex: 1 1 50%;
}

.alphatex-editor-wrapper {
	height: 100%;
	padding: 12px;
	background: var(--background-primary);
	/* 注意：不要在 wrapper 上直接增加 padding-bottom，因为 CodeMirror
	   的滚动容器位于内部，直接在 .cm-content 上添加伪元素可以
	   增加真实的滚动高度，从而使 "最后一行" 在滚动到底部时显得更高。 */
}

/* 在实际的滚动内容末尾增加占位，以扩展滚动高度并保留底部空白。 */
.alphatex-editor-wrapper .cm-content::after {
	content: '';
	display: block;
	/* 默认留白为页面高度的一半，方便最后一行在滚动到底部时向上留出更多空间 */
	height: var(--alphatex-editor-bottom-gap, 40vh);
	width: 1px;
	pointer-events: none;
}

/* 调整编辑器内部字体略小一些，避免占用过多垂直空间 */
.alphatex-editor-wrapper .cm-content,
.alphatex-editor-wrapper .cm-editor {
	font-size: var(--alphatex-editor-font-size, 0.95rem);
	line-height: 1.45;
}

.alphatex-editor-layout.is-horizontal .alphatex-editor-wrapper {
	border-bottom: none;
}

.alphatex-editor-layout.is-vertical .alphatex-editor-wrapper {
	border-right: none;
}

.alphatex-preview-section {
	padding: 12px;
	background: var(--background-primary);
	overflow: auto;
}

.alphatex-block {
	margin: 0.5rem 0 1rem 0;
}
.alphatex-score {
	width: 100%;
	overflow: auto;
}
.alphatex-controls {
	display: flex;
	flex-wrap: wrap;
	gap: 0.5rem;
	align-items: center;
	/* margin-top: 0.5rem; */
}
.alphatex-controls .atx-btn {
	padding: 0.25rem 0.5rem;
	border: 1px solid var(--background-modifier-border);
	background: var(--interactive-normal);
	color: var(--text-normal);
	cursor: pointer;
}
.alphatex-controls .atx-label {
	display: inline-flex;
	gap: 0.25rem;
	align-items: center;
}

/* Background for visible whitespace characters (spaces/tabs) in the editor. */
:root {
	--alphatex-space-bg: rgba(0, 0, 0, 0.03);
}
/* Style for visible whitespace characters decorated by whitespaceHighlightPlugin */
.inmarkdown-editor-cm .cm-content .cm-whitespace,
.cm-editor .cm-content .cm-whitespace,
.cm-content .cm-whitespace {
	/* use theme-aware hover modifier as whitespace background for better integration */
	background: var(--background-modifier-hover, var(--alphatex-space-bg));
	display: inline-block; /* allow padding/background to be visible */
	border-radius: 2px;
	padding: 0 2px;
	line-height: 1;
}

/* Render regular ASCII space as a mid-dot, keep original editor background */
.cm-content .cm-whitespace-space {
	/* keep background transparent so original bg shows through */
	background: transparent;
	color: transparent; /* hide the real space */
	position: relative;
}
.cm-content .cm-whitespace-space::before {
	content: '·';
	color: var(--text-muted);
	position: absolute;
	left: 0;
	right: 0;
	text-align: center;
	pointer-events: none;
}
.cm-content .cm-surrounded {
	/* use theme highlight background; fallback to light red */
	background: var(--background-modifier-hover, rgba(220, 38, 38, 0.12));
	border-radius: 3px;
	border: 1px solid var(--background-modifier-border);
	display: inline-block;
	padding: 0 2px;
}
.alphatex-error {
	color: var(--text-error);
}
.alphatex-note {
	color: var(--text-muted);
}

/* 错误消息容器使用flexbox布局 */
.alphatex-messages {
	display: flex;
	flex-direction: column;
	gap: 0.25rem;
}

/* 错误消息容器中的复制按钮靠右显示 */
.alphatex-messages .clickable-icon[aria-label='复制错误与原文'] {
	align-self: flex-end;
	margin-bottom: 0.25rem;
}

/* markdown post processing*/

/* Highlight for dot symbol in embedded editor */
.highlighted-dot {
	/* Simple dot highlight: use accent color and bold weight only. */
	display: inline-block;
	color: var(--text-accent, var(--color-accent));
	background: transparent;
	font-weight: 700;
	padding: 0 1px;
}

/* Highlight for bar line symbol (|) in embedded editor */
.highlighted-bar {
	background-color: var(--color-accent);
	opacity: 0.5;
	border-radius: 2px;
}

/* Token styling for AlphaTex language tokens */
.cm-content .cm-atx-meta,
.atx-meta {
	color: var(--text-accent);
	font-weight: 600;
}

.cm-content .cm-atx-comment,
.atx-comment {
	color: var(--text-muted);
	opacity: 0.9;
}

/* Brackets and braces styling (for () and {}) */
.cm-content .cm-bracket,
.cm-bracket,
.atx-bracket {
	color: var(--color-accent);
	font-weight: 700;
}

/* Metadata backslash tokens (e.g. \title, \tempo) */
.cm-content .cm-meta,
.cm-meta,
.atx-meta {
	color: var(--text-accent);
	font-weight: 700;
}

/* Comments styling (// ...) */
.cm-content .cm-comment,
.cm-comment {
	color: var(--text-muted);
}

.cm-content .cm-atx-keyword,
.atx-keyword {
	color: var(--color-accent);
	font-weight: 600;
}

.cm-content .cm-atx-string,
.atx-string {
	color: var(--text-success);
}

.cm-content .cm-atx-number,
.atx-number {
	color: var(--text-faint);
}

/* Bars and section dots */
.cm-content .cm-atx-bar,
.atx-bar {
	background-color: transparent;
	color: var(--color-accent);
	font-weight: 700;
	padding: 0 2px;
}

/* Section separator dot rendered larger and aligned */
.cm-content .cm-dot,
.highlighted-dot,
.atx-dot {
	/* Keep dot highlight minimal: accent color and bold. Avoid custom fonts/size/offsets. */
	display: inline-block;
	color: var(--text-accent, var(--color-accent));
	font-weight: 700;
	padding: 0 1px;
}

/* Note tokens (fret.string.duration) */
.cm-content .cm-note,
.atx-note {
	color: var(--text-normal);
	font-weight: 600;
}

/* Chord group */
.cm-content .cm-chord,
.atx-chord {
	color: var(--text-accent);
	background: rgba(0, 0, 0, 0.02);
	border-radius: 2px;
	padding: 0 2px;
}

/* Effect blocks { ... } */
.cm-content .cm-effect,
.atx-effect {
	color: var(--text-warning);
	font-weight: 600;
}

/* Bar number widget (kept) */
.bar-number {
	color: var(--text-muted);
	font-size: 0.8em;
	font-weight: bold;
	margin-left: 2px;
	opacity: 0.7;
}

/* Debug highlight styles: high-contrast, intentionally loud for visual inspection */
.cm-debug-meta {
	background: rgba(255, 105, 180, 0.12);
	color: #ff69b4;
	font-weight: 700;
}
.cm-debug-string {
	background: rgba(255, 99, 71, 0.06);
	color: #ff4500;
	font-weight: 700;
}
.cm-debug-number {
	background: rgba(255, 165, 0, 0.06);
	color: #ff8c00;
	font-weight: 700;
}
.cm-debug-note {
	background: rgba(255, 235, 59, 0.08);
	color: #b58900;
	font-weight: 800;
}
.cm-debug-effect-key {
	background: rgba(218, 112, 214, 0.08);
	color: #800080;
	font-weight: 800;
}
.cm-debug-effect-arg {
	background: rgba(173, 255, 47, 0.06);
	color: #6b8e23;
	font-weight: 700;
}
.cm-debug-lbrace,
.cm-debug-rbrace {
	background: rgba(30, 144, 255, 0.06);
	color: #1e90ff;
	font-weight: 800;
}
.cm-debug-lparen,
.cm-debug-rparen {
	background: rgba(100, 149, 237, 0.04);
	color: #4b6cb7;
	font-weight: 700;
}
.cm-debug-pipe {
	background: rgba(148, 0, 211, 0.12);
	color: #9400d3;
	font-weight: 900;
	border-radius: 2px;
}
.cm-debug-lessthan {
	background: rgba(0, 206, 209, 0.06);
	color: #008b8b;
	font-weight: 700;
}
.cm-debug-dot {
	background: rgba(0, 191, 165, 0.06);
	color: #00695c;
	font-weight: 900;
}
.cm-debug-duration {
	background: rgba(255, 215, 0, 0.06);
	color: #b8860b;
	font-weight: 700;
}
.cm-debug-multiply {
	background: rgba(199, 21, 133, 0.06);
	color: #c71585;
	font-weight: 800;
}

/* make debug marks slightly padded so they're visible inline */
.cm-debug-meta,
.cm-debug-string,
.cm-debug-number,
.cm-debug-note,
.cm-debug-effect-key,
.cm-debug-effect-arg,
.cm-debug-pipe,
.cm-debug-dot {
	padding: 0 2px;
	border-radius: 2px;
}

/* --- debug.css --- */
/* .debug-bar {
	display: none !important;
} */

/* DebugBar 样式 */
.debug-bar {
	display: flex;
	flex-wrap: wrap;
	align-items: center;
	gap: 0.5em;
	padding: 0.5em;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: var(--radius-s);
	margin: 0.5em 0;
}

.debug-bar .control-label {
	margin-left: 1em;
}

.debug-bar .audio-status {
	margin-left: 1em;
	font-size: 0.9em;
}

.debug-bar .scroll-separator {
	margin: 0 0.5em;
}

.debug-bar .slider-control {
	width: 80px;
}

.debug-bar .small-slider {
	width: 60px;
}

.debug-bar .disabled-label {
	opacity: 0.5;
}

/* --- doc.css --- */
/* Basic layout for TabFlow documentation view */
.tabflow-doc-header {
	padding: 12px 16px;
	border-bottom: 1px solid var(--background-modifier-border);
	display: flex;
	align-items: center;
	justify-content: space-between;
}

.tabflow-doc-header h2 {
	margin: 0;
	font-size: 1.5em;
	font-weight: 600;
}

.tabflow-doc-header-btns {
	display: flex;
	gap: 8px;
	justify-content: flex-end;
	align-items: center;
}

/* Two-column layout: left sidebar (navigation) + main content */
.tabflow-doc-layout {
	display: flex;
	gap: 16px;
	align-items: flex-start;
	margin: 12px 16px 0 16px;
}

.tabflow-doc-layout.is-narrow {
	display: block;
}

.tabflow-doc-left {
	width: 220px;
	min-width: 160px;
	max-width: 30%;
}

.tabflow-doc-main {
	flex: 1 1 auto;
	background: transparent;
	min-width: 0;
	/* allow content to shrink within flex to avoid overflow */
}

/* Navigation styling */
.tabflow-nav {
	background: var(--background-modifier-hover);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	padding: 8px;
}

.tabflow-nav ul {
	list-style: none;
	margin: 0;
	padding: 0;
}

.tabflow-nav .tab-item {
	padding: 8px 10px;
	margin: 4px 0;
	border-radius: 4px;
	cursor: default;
	color: var(--text-normal);
}

.tabflow-nav .tab-item:hover {
	background: var(--background-modifier-hover);
}

.tabflow-nav .tab-item--active {
	background: var(--interactive-accent);
	color: var(--text-on-accent, #fff);
}

/* Main content placeholder */
.tabflow-doc-main-content {
	background: var(--background-secondary);
	border: 1px dashed var(--background-modifier-border);
	border-radius: 6px;
	padding: 16px;
}

/* Embedded AlphaTex markdown editor styling */
.alphatex-playground {
	display: flex;
	gap: 12px;
}

.alphatex-playground.is-vertical {
	flex-direction: column;
}

.alphatex-playground.is-horizontal {
	flex-direction: row;
	align-items: stretch;
}

.alphatex-playground.is-horizontal .inmarkdown-editor,
.alphatex-playground.is-horizontal .inmarkdown-preview {
	flex: 1 1 0;
	min-width: 0;
}

.inmarkdown-editor-cm {
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-primary);
	padding: 6px 8px;
	margin-bottom: 12px;
	position: relative;
}

.inmarkdown-editor-toolbar {
	position: absolute;
	top: 6px;
	right: 6px;
	display: flex;
	gap: 6px;
}

.inmarkdown-editor-toolbar .clickable-icon {
	padding: 4px;
	border-radius: 4px;
}

.inmarkdown-editor-toolbar .clickable-icon:hover {
	background: var(--background-modifier-hover);
}
.inmarkdown-editor-toolbar .clickable-icon.is-success {
	background: var(--background-modifier-success);
}

.inmarkdown-editor-cm:focus-within {
	border-color: var(--interactive-accent);
	box-shadow: 0 0 0 2px color-mix(in srgb, var(--interactive-accent) 40%, transparent);
}

.inmarkdown-editor-cm .cm-editor {
	background: transparent;
	font-family: var(--font-monospace);
	font-size: 18px;
	line-height: 2;
	max-height: 600px;
	/* keep a reasonable height */
	overflow: auto;
}

.inmarkdown-editor-cm .cm-scroller {
	padding: 4px 2px;
}

.inmarkdown-editor-cm .cm-content {
	padding: 0;
}

.inmarkdown-preview {
	margin-top: 4px;
}

.alphatex-playground.is-horizontal .inmarkdown-preview {
	margin-top: 0;
}

/* Viewport fallback: narrow screens force vertical */
@media (max-width: 720px) {
	.alphatex-playground.is-horizontal {
		flex-direction: column;
	}

	.alphatex-playground.is-horizontal .inmarkdown-preview {
		margin-top: 4px;
	}
}

.tabflow-doc-content {
	min-height: 320px;
	padding: 16px;
	background: var(--background-secondary);
	border-radius: 4px;
	max-width: 90ch;
	margin: 12px 16px;
}

.tabflow-doc-markdown {
	width: 100%;
	box-sizing: border-box;
}

.tabflow-doc-footer {
	padding: 8px 16px;
	border-top: 1px solid var(--background-modifier-border);
}

.playbar-placeholder {
	color: var(--text-muted);
}

/* Two-column layout: left navigation + main content */
.tabflow-doc-layout {
	display: flex;
	gap: 16px;
	align-items: stretch;
}

.tabflow-doc-layout.is-narrow {
	display: block;
}

/* Narrow mode (per-view): make left sidebar full width above content */
.tabflow-doc-layout.is-narrow .tabflow-doc-left {
	width: 100%;
	max-width: none;
	margin-bottom: 12px;
}

.tabflow-doc-layout.is-narrow .tabflow-doc-main {
	width: 100%;
	box-sizing: border-box;
}

.tabflow-doc-left {
	width: 240px;
	min-width: 180px;
}

.tabflow-doc-main {
	flex: 1 1 auto;
	background: transparent;
	min-width: 0;
	/* allow content to shrink within flex to avoid overflow */
}

.tabflow-doc-nav {
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	padding: 8px;
}

.tabflow-doc-tab {
	padding: 8px 10px;
	border-radius: 4px;
	cursor: pointer;
	color: var(--text-normal);
	margin-bottom: 6px;
}

.tabflow-doc-tab:hover {
	background: var(--background-modifier-hover);
}

.tabflow-doc-tab.active {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	font-weight: 600;
}

.tabflow-doc-main .tabflow-doc-markdown {
	padding: 12px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	width: 100%;
	box-sizing: border-box;
}

/* Host wrapper for each playground instance in docs */
.doc-playground-host {
	margin: 16px 0 20px 0;
	/* enable container queries for responsive playground */
	container-type: inline-size;
}

/* Container query: if host is narrow, force vertical */
@container (max-width: 720px) {
	.doc-playground-host .alphatex-playground.is-horizontal {
		flex-direction: column;
	}

	.doc-playground-host .alphatex-playground.is-horizontal .inmarkdown-preview {
		margin-top: 4px;
	}
}

/* Ensure AlphaTex containers do not exceed panel width */
.alphatex-block {
	max-width: 100%;
}

.alphatex-score {
	width: 100%;
	max-width: 100%;
}

.alphatex-score svg {
	max-width: 100%;
	height: auto;
}

/* In-panel prev/next navigation (Hugo-like) */
.doc-nav {
	display: flex;
	gap: 12px;
	margin-top: 20px;
	align-items: stretch;
	flex-wrap: nowrap;
}

.doc-nav.two .doc-nav-item {
	flex: 1 1 0;
}

.doc-nav.one .doc-nav-item {
	flex: 1 1 100%;
}

.doc-nav-item {
	padding: 14px 16px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
	background: var(--background-secondary);
	cursor: pointer;
	display: flex;
	flex-direction: column;
	min-height: 72px;
	transition:
		background 120ms ease,
		border-color 120ms ease,
		transform 120ms ease;
}

.doc-nav-item:hover {
	background: var(--background-modifier-hover);
	border-color: var(--interactive-accent);
	transform: translateY(-1px);
}

.doc-nav-item.is-disabled {
	opacity: 0.5;
	cursor: not-allowed;
}

.doc-nav-item--prev {
	justify-self: start;
}

.doc-nav-item--next {
	justify-self: stretch;
	text-align: left;
}

.doc-nav-label {
	font-size: 13px;
	color: var(--text-muted);
}

.doc-nav-title {
	font-size: 16px;
	font-weight: 600;
	color: var(--text-normal);
}

@media (max-width: 500px) {
	.doc-nav {
		flex-direction: column;
	}
}

/* Responsive: keep single column */
@media (max-width: 900px) {
	.tabflow-doc-content {
		padding: 12px;
		margin: 8px;
	}

	/* Stack sidebar above main content on narrow screens */
	.tabflow-doc-layout {
		display: block;
		margin: 8px 0;
	}

	.tabflow-doc-left {
		width: 100%;
		max-width: none;
		margin-bottom: 12px;
	}

	.tabflow-doc-main {
		width: 100%;
		box-sizing: border-box;
	}
}

/* 快速滚动动画设置 */
.tabflow-doc-layout {
	scroll-behavior: smooth;
	scroll-behavior: smooth !important;
}

/* 使用更快的滚动时长和缓动函数 */
.tabflow-doc-layout * {
	scroll-behavior: smooth;
	transition: scroll-behavior 0.08s ease-out; /* 从0.15s减少到0.08s，使用ease-out让开始更快 */
}

/* 针对滚动容器的优化 */
.tabflow-doc-markdown {
	scroll-behavior: smooth;
	scroll-margin-top: 20px;
	scroll-behavior: smooth !important;
}

/* 使用CSS变量控制滚动速度 */
:root {
	--scroll-duration: 0.05s;
	--scroll-easing: cubic-bezier(0.4, 0, 0.2, 1); /* 更快的缓动曲线 */
}

/* 确保滚动动画在不同浏览器中表现一致 */
@media (prefers-reduced-motion: no-preference) {
	.tabflow-doc-layout {
		scroll-behavior: smooth;
		scroll-behavior: smooth !important;
	}

	.tabflow-doc-layout * {
		scroll-behavior: smooth;
		scroll-behavior: smooth !important;
		transition: scroll-behavior var(--scroll-duration) var(--scroll-easing);
	}

	/* 特别针对滚动容器的优化 */
	.tabflow-doc-markdown {
		scroll-behavior: smooth;
		scroll-behavior: smooth !important;
		transition: scroll-behavior var(--scroll-duration) var(--scroll-easing);
	}
}

/* 移动端优化 */
@media (max-width: 768px) {
	.tabflow-doc-layout {
		scroll-behavior: auto; /* 可选项：移动端使用即时滚动以提升性能 */
		scroll-behavior: auto !important;
	}

	.tabflow-doc-layout * {
		scroll-behavior: auto; /* 可选项：移动端使用即时滚动以提升性能 */
		scroll-behavior: auto !important;
	}
}

/* --- play.css --- */
/* 播放栏自定义按钮样式 */
.play-bar {
	position: absolute;
	left: 0;
	right: 0;
	bottom: 0;
	z-index: 100;
	height: calc(var(--status-bar-height) * 2);
	background: var(--status-bar-background);
	display: flex;
	align-items: center;
	justify-content: center;
	box-shadow: 0 -1px 0 var(--background-modifier-border);
	padding: 0 16px;
}
.play-bar-btn:hover,
.play-bar-btn:focus {
	background: var(--interactive-hover);
	color: var(--text-accent);
	outline: none;
}
.play-bar-btn:active {
	background: var(--background-modifier-selected);
}
.play-bar-btn span {
	display: inline-flex;
	align-items: center;
}

.play-bar {
	position: absolute;
	left: 0;
	right: 0;
	bottom: 0;
	z-index: 100;
	background: var(--background-primary);
	display: flex;
	flex-direction: row;
	align-items: center;
	justify-content: flex-start; /* 从左到右顺序排列，左对齐 */
	gap: 6px;
	box-shadow: 0 -1px 0 var(--background-modifier-border);
	padding: var(--size-4-2) var(--size-4-2);
}

/* 播放栏各分区样式 */
.play-bar-section {
	display: flex;
	align-items: center;
}

.play-controls {
	gap: 4px;
	min-width: 40px;
	width: 60px; /* 固定宽度 */
	justify-content: flex-start; /* 左侧对齐 */
	padding-right: 10px;
}

.play-status {
	font-size: var(--font-ui-small);
	color: var(--text-muted);
	min-width: 40px;
	width: 60px; /* 固定宽度 */
	justify-content: flex-end; /* 右侧对齐 */
	padding-left: 10px;
}

/* 确保按钮符合 Obsidian 的风格 */
.play-bar .clickable-icon {
	color: var(--icon-color);
	padding: 4px;
	border-radius: var(--radius-s);
	cursor: pointer;
}

.play-bar .clickable-icon:hover {
	color: var(--icon-color-hover);
	background-color: var(--interactive-hover);
}

/* 激活态：高亮图标本身而不仅是背景 */
.play-bar .clickable-icon.is-active {
	color: var(--interactive-accent);
	background-color: var(--interactive-hover);
}
.play-bar .clickable-icon.is-active svg {
	stroke: currentColor;
}

/* 进度条相关样式 */
/* 简化布局后，进度条容器规则可保留宽度控制 */
.play-progress-container {
	display: flex;
	align-items: center;
	gap: 8px;
	min-width: 200px;
	max-width: 800px;
}

.play-time {
	font-size: var(--font-ui-smaller);
	color: var(--text-muted);
	font-family: var(--font-monospace);
	min-width: 36px;
	text-align: center;
}

.progress-bar-container {
	position: relative;
	flex: 1;
	height: 12px;
	display: flex;
	align-items: center;
	cursor: pointer;
	max-width: 600px; /* 硬编码进度条容器的最大宽度 */
	width: 100%; /* 确保它占用可用空间但不超过最大宽度 */
}

.progress-bar {
	position: relative;
	width: 100%;
	height: 4px;
	background-color: var(--background-modifier-border);
	border-radius: 2px;
	overflow: visible;
}

.progress-fill {
	position: absolute;
	height: 100%;
	width: 0;
	background-color: var(--interactive-accent);
	border-radius: 2px;
	transition: width 0.1s ease;
	/* 确保从左边开始填充 */
	left: 0;
	top: 0;
}

.progress-handle {
	position: absolute;
	top: 50%;
	/* 使用transform确保手柄中心对齐到进度位置 */
	transform: translate(-50%, -50%);
	width: 12px;
	height: 12px;
	background-color: var(--interactive-accent);
	border-radius: 50%;
	box-shadow: 0 0 3px rgba(0, 0, 0, 0.2);
	opacity: 0;
	transition: opacity 0.2s ease;
	cursor: grab;
	z-index: 10; /* 确保手柄在进度条上方 */
}

/* 拖动状态样式 */
.progress-handle:active,
.progress-bar:active .progress-handle {
	cursor: grabbing;
	opacity: 1;
}

.progress-bar:hover .progress-handle,
.progress-bar:active .progress-handle,
.progress-bar.dragging .progress-handle,
.progress-handle.dragging,
.progress-handle:hover {
	opacity: 1;
}

/* 拖动时的增强视觉反馈 */
.progress-bar.dragging {
	cursor: grabbing;
}

.progress-handle.dragging {
	cursor: grabbing;
	transform: translate(-50%, -50%) scale(1.2);
	box-shadow: 0 0 8px rgba(0, 0, 0, 0.3);
}

/* 为内容添加底部边距，避免被播放栏遮挡 */
.view-content > .tab-view .content {
	margin-bottom: calc(var(--status-bar-height) * 2 + 8px);
}

/* 播放栏控件图标样式 */
.play-bar .speed-icon {
	margin-right: 0.5em;
}

.play-bar .stave-icon {
	margin-left: 1em;
	margin-right: 0.5em;
}

.play-bar .zoom-icon {
	margin-left: 1em;
	margin-right: 0.5em;
}

/* 音频播放器样式 */
.audio-player-container {
	display: flex;
	align-items: center;
	width: 100%;
	gap: 8px;
}

.audio-player-container audio {
	width: 100%;
	height: 32px;
}

/* --- settingtab.css --- */
.itabs-settings-tabs {
	display: flex;
	border-bottom: 1px solid var(--background-modifier-border);
	margin-bottom: 1em;
	gap: 0.5em;
}

.itabs-settings-tab {
	background: none;
	border: none;
	padding: 0.5em 1.5em;
	cursor: pointer;
	font-size: 1em;
	color: var(--text-normal);
	border-radius: 0.5em 0.5em 0 0;
	transition:
		background 0.2s,
		color 0.2s;
}

.itabs-settings-tab.active {
	border-bottom: 2px solid var(--interactive-accent);
	font-weight: bold;
	color: var(--interactive-accent);
	background: var(--background-secondary-alt);
}

.itabs-settings-tab:hover:not(.active) {
	background: var(--background-secondary);
}

.itabs-settings-contents {
	padding: 1em 0;
}

/* 针对特定插件设置项去除顶部边框，避免覆盖Obsidian原生样式 */
.itabs-settings-contents .setting-item.tabflow-no-border {
	border-top: none;
	padding: 0;
}

/* 组件卡片细节样式 */
.tabflow-card button {
	border: 1px solid var(--background-modifier-border);
	background: var(--background-secondary);
	color: var(--text-normal);
	border-radius: 6px;
	padding: 4px 8px;
}

.tabflow-card button:hover {
	background: var(--background-secondary-alt);
}

/* Clickable icon style to replace buttons for order controls */
.tabflow-card .icon-clickable {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	width: 28px;
	height: 28px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-secondary);
	color: var(--text-muted);
	border-radius: 6px;
	cursor: pointer;
	-webkit-user-select: none;
	user-select: none;
}

.tabflow-card .icon-clickable:hover {
	/* Accent-tinted hover background */
	background: color-mix(in srgb, var(--interactive-accent) 18%, var(--background-secondary-alt));
	color: var(--text-on-accent, var(--text-normal));
	box-shadow: 0 0 0 1px color-mix(in srgb, var(--interactive-accent) 35%, transparent) inset;
}

.tabflow-card .icon-clickable:focus-visible {
	outline: 2px solid var(--interactive-accent);
	outline-offset: 2px;
}

.tabflow-card .icon-clickable:active {
	background: color-mix(in srgb, var(--interactive-accent) 28%, var(--background-secondary-alt));
	color: var(--text-on-accent, var(--text-normal));
}

.tabflow-card.insert-before {
	box-shadow: 0 2px 0 0 var(--interactive-accent) inset;
}

.tabflow-card.insert-after {
	box-shadow: 0 -2px 0 0 var(--interactive-accent) inset;
}

.tabflow-card.swap-target {
	background: var(--background-modifier-hover);
	outline: 2px dashed var(--interactive-accent);
}

.tabflow-setting-description {
	color: var(--text-muted);
	font-size: 0.95em;
	margin-bottom: 0.5em;
}

pre.tabflow-setting-description {
	background-color: var(--background-secondary);
	padding: 12px 16px;
	border-radius: 6px;
	overflow-x: auto;
	font-family:
		-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
	font-size: 0.9em;
	line-height: 1.4;
	margin-top: 8px;
	margin-bottom: 16px;
	border: 1px solid var(--background-modifier-border);
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

pre.tabflow-setting-description code {
	white-space: pre;
	font-size: 0.9em;
	color: var(--text-normal);
}

ol.tabflow-setting-description,
ul.tabflow-setting-description {
	margin-left: 1.5em;
	margin-bottom: 0.5em;
}

ol.tabflow-setting-description li,
ul.tabflow-setting-description li {
	margin-bottom: 0.2em;
}

